<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Soucouyant</title>
</head>

<body>
    <script src="../dist/soucouyant.umd.js"></script>
    <script>
    const o = soucouyant.o;
    // Counter setup::

    o `cat1 > cat2 > counter ${0}`; // Registered counter stateObject.
    const counter = o.cat1.cat2.counter; // stateObject reference.


    /** 
     * 1.1 Get State:: 
     */
    counter(state => void console.log('1.1 Get State:', state));
    // Returning undefined should ignore state change.
    counter(state => void console.log('1.1 Get State: non-returned state', state));
    /** 
     * 1.2 Set State:: 
     */
    counter(state =>  {
        console.log('1.2 Set State: set to:', 5000)
        return  5000;
    });
    // RCheck new state
    counter(state =>  {
        console.log('1.2 Set State: view last changed state:', state);
    });



    // // const Collection = soucouyant.Collection;
    // const o = soucouyant.o;


    // counter.subscribe('123', (state, identitiy, timeStamp) => {
    //     console.log('subscribe')
    //     console.log(' state', state, '\n identitiy', identitiy, '\n timeStamp', timeStamp);
    // })


    // counter.subscribe('another function', (state, identitiy, timeStamp) => {
    //     console.log(' state', state, '\n identitiy', identitiy, '\n timeStamp', timeStamp);
    // })


    // Subscribe
    // const inc = varyCounter(1); // Increment  by 1
    // setTimeout(() => {
    //     varyCounter(-5); 
    // }, 1000);

    // setTimeout(() => {
    //     varyCounter(15);
    //     // counter.unsubscribe('123')
    // }, 1000);

    // setTimeout(() => {
    //     varyCounter(15);
    // }, 2000);


    // // // Random particles
    // const randpmPos = () => ~~(Math.random() * 200); // Random position
    // const randomMovement = () => !!Math.round(Math.random()); // Random movement

    // Collection([...Array(64)]) // Create collection
    // `effect > random > particlesColl`;

    // const particlesColl = o.effect.random.particlesColl; // Reference path

    // const particlesEntries = particlesColl.entries.map((_,i )=> ([i,{ // and modify.
    //     isVibrating: randomMovement(),
    //     xPosition: randpmPos(),
    //     yPosition: randpmPos(),
    //     zPosition: randpmPos()
    // }]));

    // particlesColl.update(particlesEntries); // Update the collection.


    // console.info('particlesColl.entries:', particlesColl.entries)
    // console.info('particlesColl.lastState:', particlesColl.lastState)
    // window.o = o;
    // window.Collection = Collection;

    // console.info('Entries', newColl.entries);
    // console.info('firstId', newColl.firstId);
    // console.info('lastId', newColl.lastId);
    // console.info('nextId', newColl.nextId);
    // console.info('firstState', newColl.firstState);
    // console.info('lastState', newColl.lastState);
    // console.info('firstEntry', newColl.firstEntry);
    // console.info('lastEntry', newColl.lastEntry);
    // console.info('length', newColl.length);
    // console.info('lastIndex', newColl.lastIndex);
    // console.info('nextIndex', newColl.nextIndex);
    </script>
</body>

</html>