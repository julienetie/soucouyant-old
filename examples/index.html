<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Soucouyant</title>
</head>

<body>
    <script src="../dist/soucouyant.umd.js"></script>
    <script>
    // const Collection = soucouyant.Collection;
    const o = soucouyant.o;

    // Counter
    o `cat1 > cat2 > counter ${0}`; // Register stateObject

    const counter = o.cat1.cat2.counter;

    const varyCounter = amount => counter(state => state + amount); // Modify state

    

   
    counter.subscribe('123', (state, identitiy, timeStamp) => {
         console.log('subscribe')
        console.log(' state', state, '\n identitiy', identitiy, '\n timeStamp', timeStamp);
    })


    // counter.subscribe('another function', (state, identitiy, timeStamp) => {
    //     console.log(' state', state, '\n identitiy', identitiy, '\n timeStamp', timeStamp);
    // })


    // Subscribe
    // const inc = varyCounter(1); // Increment  by 1
    // setTimeout(() => {
    //     varyCounter(-5); 
    // }, 1000);

    setTimeout(() => {
        varyCounter(15); 
        // counter.suspend('123')
    }, 1000);

   setTimeout(() => {
        varyCounter(15); 
    }, 2000);


    // // // Random particles
    // const randpmPos = () => ~~(Math.random() * 200); // Random position
    // const randomMovement = () => !!Math.round(Math.random()); // Random movement

    // Collection([...Array(64)]) // Create collection
    // `effect > random > particlesColl`;

    // const particlesColl = o.effect.random.particlesColl; // Reference path

    // const particlesEntries = particlesColl.entries.map((_,i )=> ([i,{ // and modify.
    //     isVibrating: randomMovement(),
    //     xPosition: randpmPos(),
    //     yPosition: randpmPos(),
    //     zPosition: randpmPos()
    // }]));

    // particlesColl.update(particlesEntries); // Update the collection.


    // console.info('particlesColl.entries:', particlesColl.entries)
    // console.info('particlesColl.lastState:', particlesColl.lastState)
    // window.o = o;
    // window.Collection = Collection;

    // console.info('Entries', newColl.entries);
    // console.info('firstId', newColl.firstId);
    // console.info('lastId', newColl.lastId);
    // console.info('nextId', newColl.nextId);
    // console.info('firstState', newColl.firstState);
    // console.info('lastState', newColl.lastState);
    // console.info('firstEntry', newColl.firstEntry);
    // console.info('lastEntry', newColl.lastEntry);
    // console.info('length', newColl.length);
    // console.info('lastIndex', newColl.lastIndex);
    // console.info('nextIndex', newColl.nextIndex);
    </script>
</body>

</html>